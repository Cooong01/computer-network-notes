# 1.1 什么是Internet
## 计算机网络：
‌‌‌　节点：
		主机节点（数据的目标、数据的源）（方形）
		数据交换节点（路由器（网络层）、交换机（链路层）、中继器、负载均衡设备）（圆形）
	边：通信链路
		接入（网）链路：接入互联网的链路
		骨干（主干）链路：路由器间的链路
	协议：
‌‌‌　　互联网：
	主机（端系统），运行网络应用程序
	通信链路!
	- 光纤、同轴电缆、无线电、卫星
	- 传输速率=带宽（bps）
	分组交换设备
‌‌‌　　什么是互联网：
	从具体构成角度
		协议：语法、语义、时序
		互联网是网络的网络
	从服务角度
		使用通信设施进行通信的分布式应用
		通信基础设施为apps提供编程接口（通信服务）
		udp提供面向无连接的服务
		tcp提供面向连接的服务	
# 1.2 网络边缘
　　<font color="#f79646">在网络边缘的是主机。</font>
## 模型：
![[Pasted image 20230919220329.png]]
## 主机（端系统）：
- 可分为客户和服务器
- 运行应用程序如Web、email
- 在网络的边缘
## 模式：
- 客户/服务器模式
	- 客户端向服务器请求、接收服务（如Web浏览器/服务器、email客户端/服务器）
- 对等（peer-peer）模式
	- 其中，peer是对等体
	- 很少（甚至没有）专门的服务器
- 采用网络设施的面向连接服务：TCP
- 采用基础设施的无连接服务：UDP
# 1.3 网络核心：
## 电路交换
- 端到端的资源被分配给从源端到目标端的呼叫叫call
- 网络创建这条电路时会预留恒定的传输速率，确保发送方以恒定速率向接收方传送数据。
1. 电路交换网络中的复用
	- 电路时通过频分复用（FDM）或时分复用（TDM）实现的。
	- 对于时分复用，在连接期间链路为每条连接专用一个频段，该频段宽度称为带宽。
	
## 分组交换
- 报文被划分为较小的数据块，称之为==分组==。
- 在源和目的地之间，每个分组都通过通信链路和分组交换机（路由器、链路层交换机）
1. 存储转发
2. 排队时延和分组丢失
3. 转发表和路由选择协议
# 1.4 分组交换中的时延、丢包和吞吐量

## ==时延==类型
1. 节点处理时延
- 检查分组首部和决定将该分组导向何处所需要的时间，微秒或更低量级
2. 排队时延
- 分组在链路上等待传输时，毫秒到微秒量级
3. 传输时延
- 将所有分组的比特推向链路（发射）所需要的时间，微秒量级
4. 传播时延
- 从一个路由器到另一个路由器的传播所需要的时间，广域网中毫秒量级
6. 上述累加为节点总时延 
7. 另外，可能有一些其他重要时延，与协议等因素有关
## 排队时延和丢包
- ==流量强度==：令 a 表示分组到达队列的平均速率(a 的单位是分组／秒，即 pkt/s)，R 是传输速率，即从队列中推出比特的速率（以 bps 即 b/s 为单 位），为了简单起见，也假定所有分组都是由 L 比特组成的 。 则比特到达队列的平均速率 是 La bps。最后，<font color="#f79646">假定该队列非常大</font>，因此它基本能容纳无限数量的比特 。 比率 La / R 被 称为 流量强度 (traffic intensity)。
- 流量强度越大，平均排队长度将越长。当流量强度大于1，队列将一直加长。流量强度小于1，队列会缩短。
- 在现实中，排队容量是<font color="#f79646">有限的</font>，因此路由器会丢弃（drop）该分组，即该分组会丢失（lost）。
## 端到端时延
- 测试工具：[traceroute](http://www.traceroute.org)
## 计算机网络中的吞吐量‌‌‌
- ==瞬时吞吐量==（instantaneous throughput）：考虑从主机A到主机B传送一个大文件，任何时间瞬间的瞬时吞吐量是主机B接收到该文件的速率（以bps计）
- ==平均吞吐量==（average throughput）：如果该文件由F比特组成，主机B接收到所有F比特用去T秒，则文件传送的平均吞吐量为（F/T *bps*）
- ==瓶颈链路== ：一条链路中传输速率最慢的一段链路限制了最大吞吐量。当共享链路中有足够多的干扰流量（其他数据流一起通过）时，速度最快的一段共享链路仍然可能是文件传输的瓶颈链路。
# 1.5 协议层次及其服务模型：
## 分层的体系结构
- 案例：飞机起飞到降落
![[Pasted image 20230921205139.png]]
- 协议分层
	- 分层（layer），服务（service）
	- 因特网的协议栈（protocol stack）分为五个层次（从高到低）：==应用层、运输层、网络层、链路层、物理层。==
		1. 应用层：是网络应用程序和他们的应用层协议存留的地方。包含HTTP（web文档的请求和传送）、SMTP（电子邮件报文的传输）、FTP（两个端系统之间的文件传送）、DNS（域名解析系统）。
			- ==报文（message）==：位于应用层的信息分组称为报文。
		2. 运输层：在应用程序端点之间传送应用层报文。有两种运输协议：TCP和UDP。TCP提供面向连接的服务，可靠。UDP提供无连接服务，不可靠。
			- ==报文段（segment）==：运输层的分组。 
		3. 网络层（通常简单称为IP层）：负责将称为==数据报（datagram）==的网络层分组从一台主机移动到另一台主机。运输层会向网络层递交报文段和目的地址。
			- 包括著名的网际协议IP。IP定义了在数据报中的各个字段以及端系统和路由器如何作用于这些字段。IP协议只有一个。
			- 还包括许多路由选择协议。
		4. 链路层：沿着路径将数据报传递给下一个节点。链路层提供的服务取决于该链路的特定链路层协议。一些协议提供可靠传递，包括以太网、WiFi和电缆接入网的DOCSIS协议。
			- 网络层受到来自每个不同的链路层协议的不同服务。
			- 一个数据报可能被沿途不同链路上的不同链路层协议处理。
			- ==帧（frame）==：链路层分组。
		5. 物理层：将帧中的一个个比特从一个节点移动到下一个节点。该层协议是链路相关的，并与实际传输媒体相关。比如以太网具有许多物理层协议，分别关于双绞铜线、同轴电缆、光纤。 
	- OSI（开放系统互联）模型：包含7层：应用层、表示层、会话层、运输层、网络层、数据链路层和物理层。
		- 相比于因特网协议栈多了表示层和会话层。
			- 表示层：使应用程序解释交换数据的含义，以及数据描述（表示/存储格式问题）。
			- 会话层：提供数据交换的定界和同步功能，包括建立检查点和恢复方案的方法。
		- 在因特网中，这两层的问题留给应用程序开发者回答。如果该服务重要，自己构建。
## 封装（encapsulation）
- ==应用层报文（application-layer message）==被传送给运输层，运输层受到报文会附上附加信息（即运输层首部信息。该信息会被接收端的运输层使用）。应用层报文和运输层首部信息构成==运输层报文段（transport-layer segment）==，这就封装了应用层报文。运输层向网络层传递该报文段，网络层会增加像是源和目的端系统地址等网络层首部信息，生成==网络层数据报（network-layer datagram）==，再传给链路层，链路层再增加链路层的首部信息并生成==链路层帧（link-layer frame）==。
- 所以，每一层的一个分组都有两种类型字段：首部字段和有效载荷字段。有效载荷通常来自上一层的分组。
- ![[Pasted image 20230921214655.png]]
# 1.6 面对攻击的网络
# 有害程序进入计算机
- 恶意软件（malware）
- 僵尸网络（botnet）
- 自我复制（self-replicating）类：
‌‌‌　　- 病毒（virus）
‌‌‌　　- 蠕虫（worm）
# 攻击服务器和网络基础设施
- 拒绝服务攻击（Denial-of-Service （DoS） attack）。顾名思义，会让基础设施不能由用户合法使用。
	- 弱点攻击：把专门制作的报文发给易受攻击的地方。
	- 带宽洪泛：发送大量分组以拥塞链路。单源攻击会被上游路由器检测并阻挡，因此攻击者会控制多个源来猛烈发送流量，也就是==分布式DoS==（distributed DoS，==DDoS==）。利用的是受害主机组成的僵尸网络。
	- 连接洪泛：在目标主机中创建大量半开或全开TCP连接，使主机分不清，进而停止合法连接。
## 嗅探分组
- 在无线传输设备附近放置一台被动的接收机，即分组嗅探器（packet sniffer），就能得到传输的每个分组的副本。它们是被动的，所以不向信道注入分组，因此难以检测。有线环境中也能部署。
- 防御方法与密码学有关。
## 伪装
- IP哄骗：生成具有任意源地址、分组内容和目的地址的分组，发到接收方，接收方把虚假的源地址当成真实的，进而引发一些执行。
- 利用端点鉴别机制，即一 种使我们能够确信一个报文源自我们认为它应当来自的地方的机制。
# 1.7 计算机网络和因特网的历史
- ISP（Internet Service Provider）：互联网服务提供商
- 谷歌等通过自己部署的专用网络把分布在全球的数据中心连接在一起，而且通过直接与较低层ISP对等连接，尽可能绕过因特网。因此，谷歌几乎可以瞬间提供搜索结果。